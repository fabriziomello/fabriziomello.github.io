
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Fabrízio de Royes Mello</title>
  <meta name="author" content="Fabrízio de Royes Mello">

  
  <meta name="description" content="Pessoal,A chamada de trabalhos do PGBR2011 está aberta.Vejam mais informações interessantes de como participar no excelente post do Fábio Telles.&# &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://fabriziomello.github.io/blog/page/2">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Fabrízio de Royes Mello" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-49388509-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Fabrízio de Royes Mello</a></h1>
  
    <h2>Blog sobre Tecnologia da Informação</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:fabriziomello.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/08/31/pgbr2011-chamada-de-trabalhos/">PGBR2011 - Chamada De Trabalhos</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-08-31T00:00:00-03:00" pubdate data-updated="true">Aug 31<span>st</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Pessoal,<br /><br />A <a href="http://pgbr.postgresql.org.br/2011/chamada.php">chamada de trabalhos do PGBR2011</a> está aberta.<br /><br />Vejam mais informações interessantes de como participar no excelente <a href="http://www.midstorm.org/~telles/2011/08/14/pgbr2011-chamada-de-trabalhos/">post do Fábio Telles</a>.<br /><br />&#8212;<br />Fabrízio Mello<br />fabriziomello [at] gmail.com</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/07/28/pgdayrs-2011-targettrust-ira-sortear-1/">PGDay/RS 2011 - Targettrust Irá Sortear 1 (Um) Curso De PostgreSQL (20h)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-07-28T00:00:00-03:00" pubdate data-updated="true">Jul 28<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Durante o <a href="http://www.postgresql.org.br/eventos/pgday/rs">PGDay/RS 2011</a> a <a href="http://www.targettrust.com.br/">T@rgetTrust</a>, empresa especializada em treinamentos, irá sortear 1 (um) curso, a escolha do sorteado, da sua <a href="http://www.targettrust.com.br/web/formacao/administrador-e-desenvolvedor-postgresql.aspx">Formação PostgreSQL</a>:<br /><br /><ul><li><a href="http://www.targettrust.com.br/web/curso/postgresql-fundamentos.aspx?formacao=administrador-e-desenvolvedor-postgresql">PostgreSQL Fundamentos</a></li><li><a href="http://www.targettrust.com.br/web/curso/postgresql-procedural.aspx?formacao=administrador-e-desenvolvedor-postgresql">PostgreSQL Procedural</a></li><li><a href="http://www.targettrust.com.br/web/curso/postgresql-administracao.aspx?formacao=administrador-e-desenvolvedor-postgresql">PostgreSQL Administração</a></li><li><a href="http://www.targettrust.com.br/web/curso/postgresql-administracao-avancada.aspx?formacao=administrador-e-desenvolvedor-postgresql">PostgreSQL Administração Avançada</a></li></ul><div>Mais informações acesse o site do evento em:</div><div><br /></div><div><a href="http://www.postgresql.org.br/eventos/pgday/rs">http://www.postgresql.org.br/eventos/pgday/rs</a></div><div><br /></div><div><span class="Apple-style-span" style="color: #333333; font-family: Verdana, Arial, sans-serif; font-size: 13px; line-height: 16px;">Cordialmente,<br /><br />Fabrízio de Royes Mello<br />fabriziomello [at] gmail.com</span></div></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/06/15/pgdayrs-2011-em-porto-alegrers/">PGDay/RS 2011 Em Porto Alegre/RS</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-06-15T00:00:00-03:00" pubdate data-updated="true">Jun 15<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<b><br /></b><br /><b>O que é?</b><br /><br />Postgres ou <a href="http://www.postgresql.org/">PostgreSQL</a> é um projeto de Sistema Gerenciador de Banco de Dados open-source que foi iniciado em 1986, na Universidade de Berkeley, na Califórnia.<br /><br /><a href="http://www.postgresql.org.br/eventos/pgday">PGDay</a>, ou <a href="http://www.postgresql.org.br/eventos/pgday">Dia do Postgres</a>, é um evento não tão formal quanto ao <a href="http://pgbr.postgresql.org.br/">PGBR</a> (Conferência sobre PostgreSQL no Brasil) e de caráter regional, podendo ser realizado com poucas pessoas em qualquer/vários estados do País.<br /><br /><br /><br /><b>Quais são os objetivos?</b><br /><br />É uma chance para que acadêmicos, DBAs e desenvolvedores Brasileiros de PostgreSQL aprendam, troquem experiências, exponham casos de sucessos, desafios e fortifiquem sua rede de relacionamento profissional.<br /><br /><br /><b>Qual o público alvo?</b><br /><br />Dentre o público esperado estão:<br /><br /><ul><li>Administradores de Bancos de Dados;</li><li>Acadêmicos de Cursos Técnicos ou Universidades;</li><li>Desenvolvedores de Softwares;</li><li>Organizações governamentais;</li><li>Entusiastas de Software Livre;</li></ul><br /><br /><b>Data e Local</b><br /><br />O evento será dia <u>19 de Agosto de 2011</u>, no <u>Auditório do Bloco D da <b><a href="http://www.uniritter.edu.br/">Uniritter</a></b></u> localizado na Rua Orfanotrófio, 555, bairro Alto Teresópolis CEP: 90840-440 em Porto Alegre, RS.<br /><br /><br /><b>Inscrições, Palestras, Atividades e mais informações veja em:</b><br /><a href="http://www.postgresql.org.br/eventos/2011/pgday/rs">http://www.postgresql.org.br/eventos/2011/pgday/rs</a><br /><br /><br /><span class="Apple-style-span" style="color: #333333; font-family: Verdana, Arial, sans-serif; font-size: 13px; line-height: 16px;">Cordialmente,<br /><br />Fabrízio de Royes Mello<br />fabriziomello [at] gmail.com</span></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/04/08/pgbr2011-conferencia-nacional/">PGBR2011 - Conferência Nacional PostgreSQL (3-4 Novembro, São Paulo)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-04-08T00:00:00-03:00" pubdate data-updated="true">Apr 8<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<span class="Apple-style-span" style="font-family: inherit;">O PGBR (antes conhecido como PGCon Brasil) é o maior evento sobre PostgreSQL das Américas: em 2009 e 2008, o evento trouxe mais de 300 profissionais de TI e, em 2007, mais de 200. Em 2011, serão 3 salas simultâneas com tutoriais, palestras e mesas de alto nível, contando com desenvolvedores nacionais e internacionais do PostgreSQL além de profissionais renomados no mercado brasileiro.</span><br /><span class="Apple-style-span" style="font-family: inherit;"><br /></span><br /><span class="Apple-style-span" style="font-family: inherit;">Venha conhecer de perto uma das comunidades de Software Livre que mais cresce no Brasil e no mundo que conta com o suporte de empresas de grande porte como CAIXA, Skype, BASF e Cisco. Conheça alguns dos maiores casos de sucesso brasileiros em órgãos públicos e privados, as novidades da versão 9.1 e o que está previsto para a versão 9.2 do PostgreSQL. Você terá a oportunidade também de conhecer técnicas avançadas de montitoramento, ajustes de performance, técnicas de replicação, migração, alta disponibilidade e muito mais.</span><br /><span class="Apple-style-span" style="font-family: inherit;"><br /></span><br /><span class="Apple-style-span" style="font-family: inherit;">Mais informações no sítio do evento:&nbsp;<a href="http://pgbr.postgresql.org.br/">http://pgbr.postgresql.org.br</a></span><br /><span class="Apple-style-span" style="font-family: inherit;"><br /></span><br /><span class="Apple-style-span" style="font-family: inherit;">Aproveite também e preencha a nossa pesquisa sobre uso do PostgreSQL no Brasil:</span><br /><span class="Apple-style-span" style="font-family: inherit;"><a href="https://spreadsheets.google.com/viewform?formkey=dFNOS0pjUFp3MFM0Y0xWT1RIWUZfRGc6MA">https://spreadsheets.google.com/viewform?formkey=dFNOS0pjUFp3MFM0Y0xWT1RIWUZfRGc6MA</a></span><br /><br /><br />Cordialmente,<br /><br />Fabrízio de Royes Mello<br />fabriziomello [at] gmail.com</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/10/12/vaga-dba-postgresql-em-porto-alegrers/">Vaga DBA PostgreSQL Em Porto Alegre/RS</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-10-12T00:00:00-03:00" pubdate data-updated="true">Oct 12<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<span class="Apple-style-span" style="border-collapse: collapse; font-family: arial, sans-serif; font-size: 13px;">Pessoal,</span><br /><div><br /></div><div>Estamos com uma vaga para DBA PostgreSQL em Porto Alegre/RS, com as seguintes requisitos:</div><div><br /></div><div><div><b>ATRIBUIÇÕES:</b></div><div><ol><li>instalar/configurar Linux para posterior instalação do PostgreSQL</li><li>instalar/configurar o PostgreSQL na empresa (produção, desenvolvimento e testes) e nos clientes (produção e testes)</li><li>implantação e manutenção de políticas e rotinas de backup das bases de dados da empresa e dos clientes (scripts de backup padronizados)</li><li>implantação e manutenção de polĩticas e rotinas de segurança de dados</li><li>monitorar servidores PostgreSQL da empresa e dos clientes (coletar informações e estatísticas para geração de base de conhecimento dos clientes)</li><li>atender chamados dos clientes por eventuais problemas relacionados ao servidor de Banco de Dados PostgreSQL</li><li>apoio aos programadores na criação de SQLs complexos, bem como na construção de procedimentos armazenados e funções (stored procedures e functions)</li><li>apoio aos programadores na modelagem física de banco de dados</li><li>realizar migrações de versão do PostgreSQL</li><li>sugerir boas práticas de uso de SQL e Modelos de Dados a equipe de desenvolvimento</li><li>capacitação da equipe de desenvolvimento da empresa no uso de novos recursos oferecidos pelo PostgreSQL</li><li>otimização de performance (tunnig) do PostgreSQL e sistema operacional (Linux)</li></ol></div><div><br /></div><div><b>CONHECIMENTOS:</b></div><div><ol><li>PostgreSQL</li><li>Linux</li><li>Shell Script</li><li>Programação PHP (desejável)</li></ol></div></div><div><br /></div><div><br /></div><div>Interessados enviar Curriculum por e-mail para <b><u>curriculos [at] dbseller.com.br</u></b>&nbsp;que após análise inicial dos mesmos entraremos em contato para agendar entrevista.</div><div><br /></div><div>Cordialmente,</div><div><br /></div><div>Fabrízio de Royes Mello</div><div>fabriziomello [at] gmail.com</div></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/09/17/funcao-arraydiff-em-postgresql/">Função &#8220;Array_diff&#8221; Em PostgreSQL</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-09-17T00:00:00-03:00" pubdate data-updated="true">Sep 17<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;">Estava realizando algumas queries aqui no meu trabalho e tive a necessidade de uma função que retornasse um array contendo os elementos de um determinado array e não estão presentes em outro, igual ao array_diff do PHP [1].</div><div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;"><br /></div></div><div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;">Para resolver esse pequeno problema bastou um SELECT, vejam a implementação da função &#8220;array_diff&#8221; para PostgreSQL abaixo:</div></div><div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;"><br /></div></div><div><div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;"><span class="Apple-style-span" style="font-family: 'courier new';"><span class="Apple-style-span" style="font-size: small;">CREATE OR REPLACE FUNCTION array_diff (anyarray, anyarray) RETURNS anyarray</span></span></div></div><div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;"><span class="Apple-style-span" style="font-family: 'courier new';"><span class="Apple-style-span" style="font-size: small;">AS $$</span></span></div></div><div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;"><span class="Apple-style-span" style="font-family: 'courier new';"><span class="Apple-style-span" style="font-size: small;">&nbsp;&nbsp;SELECT array(</span></span></div></div><div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;"><span class="Apple-style-span" style="font-family: 'courier new';"><span class="Apple-style-span" style="font-size: small;">&nbsp;&nbsp; &nbsp;SELECT $1[s.i]</span></span></div></div><div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;"><span class="Apple-style-span" style="font-family: 'courier new';"><span class="Apple-style-span" style="font-size: small;">&nbsp;&nbsp; &nbsp; &nbsp;FROM generate_series(array_lower($1,1), array_upper($1,1)) AS s(i)</span></span></div></div><div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;"><span class="Apple-style-span" style="font-family: 'courier new';"><span class="Apple-style-span" style="font-size: small;">&nbsp;&nbsp; &nbsp; WHERE NOT $1[s.i] = ANY($2)</span></span></div></div><div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;"><span class="Apple-style-span" style="font-family: 'courier new';"><span class="Apple-style-span" style="font-size: small;">&nbsp;&nbsp;);</span></span></div></div><div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;"><span class="Apple-style-span" style="font-family: 'courier new';"><span class="Apple-style-span" style="font-size: small;">$$</span></span></div></div><div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;"><span class="Apple-style-span" style="font-family: 'courier new';"><span class="Apple-style-span" style="font-size: small;">LANGUAGE sql;</span></span></div></div><div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;"><span class="Apple-style-span" style="font-family: 'courier new';"><span class="Apple-style-span" style="font-size: small;"><br /></span></span></div></div><div><div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;"><span class="Apple-style-span" style="font-family: 'courier new';"><span class="Apple-style-span" style="font-size: small;">postgres@bdteste=# SELECT array_diff(array[1, 2, 3], array[1, 4, 3]);</span></span></div></div><div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;"><span class="Apple-style-span" style="font-family: 'courier new';"><span class="Apple-style-span" style="font-size: small;">&nbsp;array_diff</span></span></div></div><div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;"><span class="Apple-style-span" style="font-family: 'courier new';"><span class="Apple-style-span" style="font-size: small;">&#8212;&#8212;&#8212;&#8212;</span></span></div></div><div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;"><span class="Apple-style-span" style="font-family: 'courier new';"><span class="Apple-style-span" style="font-size: small;">&nbsp;{2}</span></span></div></div><div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;"><span class="Apple-style-span" style="font-family: 'courier new';"><span class="Apple-style-span" style="font-size: small;">(1 row)</span></span></div></div><div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;"><span class="Apple-style-span" style="font-family: 'courier new';"><span class="Apple-style-span" style="font-size: small;"><br /></span></span></div></div><div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;"><span class="Apple-style-span" style="font-family: 'courier new';"><span class="Apple-style-span" style="font-size: small;">postgres@bdteste=# SELECT array_diff(array[1, 4, 3], array[1, 2, 3]);</span></span></div></div><div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;"><span class="Apple-style-span" style="font-family: 'courier new';"><span class="Apple-style-span" style="font-size: small;">&nbsp;array_diff</span></span></div></div><div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;"><span class="Apple-style-span" style="font-family: 'courier new';"><span class="Apple-style-span" style="font-size: small;">&#8212;&#8212;&#8212;&#8212;</span></span></div></div><div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;"><span class="Apple-style-span" style="font-family: 'courier new';"><span class="Apple-style-span" style="font-size: small;">&nbsp;{4}</span></span></div></div><div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;"><span class="Apple-style-span" style="font-family: 'courier new';"><span class="Apple-style-span" style="font-size: small;">(1 row)</span></span></div></div></div><div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;"><br /></div></div><div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;"><br /></div></div><div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;">Espero ter ajudado de alguma forma.</div></div><div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;"><br /></div></div><div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;">[1]&nbsp;<a href="http://br.php.net/manual/en/function.array-diff.php">http://br.php.net/manual/en/function.array-diff.php</a></div></div></div><div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;"><br /></div></div><div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;"><br /></div></div><div><div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;">Cordialmente,</div></div><div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;"><br /></div></div><div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;">Fabrízio de Royes Mello</div></div><div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;">fabriziomello [at] gmail.com</div></div></div></div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>Fabrízio de Royes Mello</div>
<div class='content'>
Sua refatoração é muito válida, porém sacrificamos a portabilidade da função&#8230; a versão que implementei funciona com as versões 8.1, 8.2, 8.3, 8.4, 9.0 e 9.1 (q ainda esta em beta).<br /><br />A utilização da função &quot;unnest&quot; limita vc a utilizar a função somente em versões iguais ou superiores a 8.4.<br /><br />De qualquer forma ficou muito enxuta a versão que vc implemento&#8230; gostei bastante.<br /><br /><br />Fabrízio de Royes Mello<br />fabriziomello [at] gmail.com</div>
</div>
<div class='comment'>
<div class='author'>Anonymous</div>
<div class='content'>
Opa amigo, Eu estava procurando uma forma de fazer o diff e depois que vi como vc fez eu resolvi usar a funcao unnest e fiz desta forma, nao sei se ficou melhor ou pior&#8230;<br />Grande abraço e obrigado pela luz ;)<br /><br />CREATE OR REPLACE FUNCTION arrayDiff(anyarray, anyarray) RETURNS anyarray<br />AS $$<br />  SELECT array(<br />    SELECT x<br />      FROM unnest($1) AS x WHERE x not in (SELECT unnest($2))<br />  );<br />$$<br />LANGUAGE sql;</div>
</div>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/08/21/consegi-2010/">CONSEGI 2010</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-08-21T00:00:00-03:00" pubdate data-updated="true">Aug 21<span>st</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Nos dias 18, 19 e 20 de agosto/2010 ocorreu o evento denominado <a href="http://www.consegi.gov.br/">CONSEGI2010</a>, onde tive oportunidade de participar como palestrante/instrutor em algumas atividades relacionadas ao <a href="http://www.postgresql.org.br/">PostgreSQL</a>.<br /><div><br /></div><div>Abaixo seguem os links para download dos arquivos da palestra de das oficinas que ministrei:</div><div><br /></div><div><a href="http://www.slideshare.net/fabriziomello/database-refactoring-postgresqlconsegi2010">Dia 19/08 - Palestra: Database Refactoring com PostgreSQL</a></div><div><a href="http://www.slideshare.net/fabriziomello/oficina-postgresql-basicoconsegi2010">Dia 20/08 - Oficina: PostgreSQL Básico</a></div><div><a href="http://www.slideshare.net/fabriziomello/oficina-postgresql-avanadoconsegi2010">Dia 20/02 - Oficina: PostgreSQL Avançado</a></div><div><br /></div><div>Obrigado a todos que estiveram presentes prestigiando o evento e as atividades que exerci.</div><div><br /></div><div>Cordialmente,</div><div><br /></div><div>Fabrízio de Royes Mello</div><div>fabriziomello [at] gmail.com</div><div><br /></div></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/06/27/postgresql-na-memoria-ram-in-memory/">PostgreSQL Na Memória RAM (In-Memory Database)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-06-27T00:00:00-03:00" pubdate data-updated="true">Jun 27<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Recentemente (dia 24/06/2010) em seu blog, replicado no <a href="http://planet.postgresql.org/">planet-postgresql</a>, o <a href="http://rhaas.blogspot.com/">Sr. Robert Haas</a> postou o artigo denominado &#8221;<a href="http://rhaas.blogspot.com/2010/06/postgresql-as-in-memory-only-database_24.html">PostgreSQL as an In-Memory Only Database</a>&#8221;.<br /><br />Baseado em seu relato e no abordado na lista <a href="http://archives.postgresql.org/pgsql-performance/">pgsql-performance</a> montei este pequeno tutorial para exemplificar na prática o que foi discutido, ou seja, uma forma fácil e rápida de criar o seu próprio &#8220;PostgreSQL as an In-Memory Database&#8221;.<br /><br />Estou utilizando o Ubuntu 9.04 e PostgreSQL 8.3 para executar as atividades:<br /><br />1) Montando partição em memória com <a href="http://en.wikipedia.org/wiki/Tmpfs">tmpfs</a>:<br /><br /><span style="font-size: 85%;"><span style="font-family: 'courier new';">$ sudo -s</span><span style="font-family: 'courier new';"><br /><br />$ mkdir /mnt/in_memory</span><span style="font-family: 'courier new';"><br /><br />$ mount -t tmpfs -o size=2G,nr_inodes=8k,mode=0700 tmpfs /mnt/in_memory/</span><br /><br /></span><br />2) Criando cluster na partição criada:<span style="font-size: 85%;"><span style="font-family: 'courier new';"><br /><br />$ chown -R postgres. /mnt/in_memory/</span><span style="font-family: 'courier new';"><br /><br />$ su - postgres -c &#8220;/usr/lib/postgresql/8.3/bin/initdb -D /mnt/in_memory&#8221;</span><br /><br /><br /></span>3) Ajustando configurações do cluster (conforme recomendações do artigo citado):<span style="font-size: 85%;"><span style="font-family: 'courier new';"><br /><br />$ vim /mnt/in_memory/postgresql.conf</span><span style="font-family: 'courier new';"><br /><br />fsync=off</span><span style="font-family: 'courier new';"><br />synchronous_commit=off</span><span style="font-family: 'courier new';"><br />full_page_writes=off</span><span style="font-family: 'courier new';"><br />bgwriter_lru_maxpages=0</span></span><br /><br />Obs: caso vc já tenha algum processo do PostgreSQL executando na mesma máquina desse teste então vc deve verificar se não será necessário modificar também a variável &#8220;port&#8221; do postgresql.conf, pois o padrão é 5432.<br /><br /><br />4) Iniciando processo servidor:<span style="font-size: 85%;"><span style="font-family: 'courier new';"><br /><br />$ su - postgres -c &#8220;/usr/lib/postgresql/8.3/bin/pg_ctl -D /mnt/in_memory -l /mnt/in_memory/postgres.log start&#8221;</span></span><br /><br /><br />5) Verificando se o cluster está funcionando:<span style="font-size: 85%;"><span style="font-family: 'courier new';"><br /><br />$ ps ax | grep post</span><span style="font-family: 'courier new';"><br />19614 pts/3    S      0:00 /usr/lib/postgresql/8.3/bin/postgres -D /mnt/in_memory</span><span style="font-family: 'courier new';"><br />19653 ?            Ss     0:00 postgres: writer process</span><span style="font-family: 'courier new';"><br />19654 ?     Ss     0:00 postgres: wal writer process<br /></span><span style="font-family: 'courier new';">19655 ?            Ss     0:00 postgres: autovacuum launcher process</span><span style="font-family: 'courier new';"><br />19656 ?            Ss     0:00 postgres: stats collector process<br /><br /></span><span style="font-family: 'courier new';">$ /usr/lib/postgresql/8.3/bin/psql -U postgres -p 5437 -l</span><span style="font-family: 'courier new';"><br />Lista dos bancos de dados</span><span style="font-family: 'courier new';"><br />Nome    |   Dono   | Codificação </span><span style="font-family: 'courier new';"><br />&#8212;&#8212;&#8212;&#8211;+&#8212;&#8212;&#8212;-+&#8212;&#8212;&#8212;&#8212;-</span><span style="font-family: 'courier new';"><br />postgres  | postgres | UTF8</span><span style="font-family: 'courier new';"><br />template0 | postgres | UTF8</span><span style="font-family: 'courier new';"><br />template1 | postgres | UTF8</span><span style="font-family: 'courier new';"><br />(3 registros)</span></span><br /><br />Acredito que neste ponto você já esteja com o seu PostgreSQL na memória pronto e funcional.<br /><br />Lembre-se que o mesmo está &#8220;literalmente&#8221; na memória RAM, portanto ao desligar o micro o seu cluster inteiro será perdido, por isso o seu uso fica limitado como um Cache ao invés do uso do memcached ou alternativas NoSQL, porém com todos recursos disponíveis no PostgreSQL.<br /><br /><br />Por favor reportem problemas com esse mini-tutorial e/ou críticas e sugestões.<br /><br /><br />Cordialmente,<br /><br />Fabrízio de Royes Mello<br />fabriziomello [at] gmail.com</div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>Fabrízio de Royes Mello</div>
<div class='content'>
Tem sim, mas se a sua necessidade é de manter os dados então creio que essa técnica não atenda a sua necessidade. Até mesmo porque um desligamento indevido do equipamento irá ocasionar a perda da partição.<br /><br />Cordialmente,<br /><br />Fabrízio de Royes Mello<br />fabriziomello [at] gmail.com</div>
</div>
<div class='comment'>
<div class='author'>Moisés P. Sena</div>
<div class='content'>
Achei interessante a idéia!<br />Não tem um recurso para quando der o halt na máquina, antes de desligar tudo copiar os arquivos para o HD?</div>
</div>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/04/13/postgresql-82x-em-ubuntu-804/">PostgreSQL 8.2.x Em Ubuntu > 8.04</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-04-13T00:00:00-03:00" pubdate data-updated="true">Apr 13<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Como é de conhecimento de todos as versões do Ubuntu superiores a 8.04 (hardy) não possuem em seus repositórios padrões o PostgreSQL 8.2.x, então o caminho natural para que seja feita a instalação é download dos fontes, compilar e instalar&#8230; para quem tem bastante intimidade com Linux + PostgreSQL essa é uma atividade corriqueira e que normalmente é realizada em ambientes de produção.<br /><br />Porém tenho recebido de clientes e amigos questionamentos de como instalar, de maneira mais simples, o PostgreSQL 8.2.x em Ubuntu &gt; 8.04, pois bem então ai vai a dica.<br /><br />No console, como usuário root, execute:<br /><br /><span style="font-size: 85%;"><span style="font-family: 'courier new';">$ apt-get update</span><span style="font-family: 'courier new';"><br /><br />$ echo &#8220;deb http://archive.ubuntu.com/ubuntu/ hardy main universe&#8221; &gt; /etc/apt/sources.list.d/ubuntu-8.04.list</span><span style="font-family: 'courier new';"><br /><br />$ apt-get update</span><span style="font-family: 'courier new';"><br /><br />$ apt-get install postgresql-8.2</span><span style="font-family: 'courier new';"><br /><br />$ rm -f /etc/apt/sources.list.d/ubuntu-8.04.list</span><span style="font-family: 'courier new';"><br /><br />$ apt-get update</span><br /></span><br /><br />Com isso basta executar um <span style="font-weight: bold;">pg_lsclusters</span> ou um <span style="font-weight: bold;">dpkg &#8211;list &#8216;postgresql*&#8217; </span>no console que poderão verificar que a versão 8.2.7 estará instalada.<br /><br />Um pequeno contratempo em relação a essa abordagem é que teremos a versão 8.2.7 instalada e atualmente já temos disponível a 8.2.16, mas é possível sim atualizar a versão através da compilação pelos fontes mantendo toda a infra-estrutura do Ubuntu com o postgresql-common, mas isso fica para um próximo post.<br /><br />Por favor reportem possíveis problemas com esse mini-tutorial.<br /><br /><br />Cordialmente,<br /><br />Fabrízio de Royes Mello<br />fabriziomello [at] gmail.com</div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>Alvaro Borges</div>
<div class='content'>
Deu muito certo aqui a instalação OBRIGADO!</div>
</div>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/01/22/postgresql-85-vs-90/">PostgreSQL 8.5 vs 9.0</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-01-22T00:00:00-02:00" pubdate data-updated="true">Jan 22<span>nd</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Não é oficial ainda mas parece que não teremos mais uma versão 8.5 do PostgreSQL&#8230; a nova versão será 9.0 conforme discussão na lista de desenvolvimento do mesmo [1].<br /><br />O motivo dessa mudança é o grande número de novas funcionalidades que irá incorporar a nova versão do PostgreSQL&#8230; isso é muito interessante pois a evolução do &#8220;elefantinho&#8221; está cada vez mais acelerada&#8230;<br /><br />Vida longa ao PostgreSQL!!!<br /><br /><br />[1] <a href="http://archives.postgresql.org/pgsql-hackers/2010-01/msg02056.php">http://archives.postgresql.org/pgsql-hackers/2010-01/msg02056.php</a><br /><br /><br />Cordialmente,<br /><br />Fabrízio de Royes Mello<br />fabriziomello [at] gmail.com</div>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/3/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/04/26/projeto-aceito-no-google-summer-of-code-2014-gsoc2014/">Projeto Aceito No Google Summer of Code 2014 (GSoC2014)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/03/10/novidades/">Novidades</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/06/10/database-refactoring/">Database Refactoring</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/06/10/bad-smells-mal-cheiros-em-bancos-de/">Bad Smells (Mal Cheiros) Em Bancos De Dados</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/02/21/postgresql-93devel-nova-extensao/">PostgreSQL 9.3devel - Nova Extensão &#8220;Postgres_fdw&#8221;</a>
      </li>
    
  </ul>
</section>



<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/fabriziomello@gmail.com?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Fabrízio de Royes Mello -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
